<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS with Terraform Guide</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Light gray background */
            color: #374151; /* Dark gray text */
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1.5rem;
        }
        .code-block {
            background-color: #1f2937; /* Dark background for code */
            color: #e5e7eb; /* Light text for code */
            padding: 1.25rem;
            border-radius: 0.5rem;
            overflow-x: auto; /* Enable horizontal scrolling for long lines */
            font-family: 'Fira Code', 'Cascadia Code', monospace; /* Monospaced font for code */
            font-size: 0.9rem;
            line-height: 1.5;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .screenshot-placeholder {
            width: 100%;
            max-width: 800px;
            height: 300px; /* Fixed height for placeholders */
            background-color: #d1d5db; /* Light gray for placeholder background */
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.5rem;
            margin: 1.5rem auto;
            color: #4b5563;
            font-weight: 500;
            text-align: center;
            border: 2px dashed #9ca3af;
        }
        h1, h2, h3 {
            color: #111827; /* Darker headings */
            font-weight: 700;
        }
        .nav-link {
            transition: color 0.2s ease-in-out;
        }
        .nav-link:hover {
            color: #3b82f6; /* Blue on hover */
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header -->
    <header class="bg-white shadow-md py-4">
        <div class="container flex flex-col sm:flex-row justify-between items-center">
            <a href="#" class="text-2xl font-bold text-gray-900 mb-4 sm:mb-0">AWS Terraform Guide</a>
            <nav>
                <ul class="flex space-x-6">
                    <li><a href="#introduction" class="nav-link text-gray-700 hover:text-blue-600">Introduction</a></li>
                    <li><a href="#ec2" class="nav-link text-gray-700 hover:text-blue-600">EC2</a></li>
                    <li><a href="#s3" class="nav-link text-gray-700 hover:text-blue-600">S3</a></li>
                    <li><a href="#vpc" class="nav-link text-gray-700 hover:text-blue-600">VPC</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="py-8">
        <div class="container bg-white p-8 rounded-lg shadow-lg">

            <!-- Introduction Section -->
            <section id="introduction" class="mb-12">
                <h1 class="text-4xl mb-6 text-center">Mastering AWS Infrastructure with Terraform</h1>
                <p class="text-lg leading-relaxed mb-6">
                    Welcome to this comprehensive guide on provisioning AWS infrastructure using Terraform. Terraform, an open-source Infrastructure as Code (IaC) tool by HashiCorp, allows you to define and provision your infrastructure using a high-level configuration language. This approach brings numerous benefits, including version control, reusability, and consistency.
                </p>
                <p class="text-lg leading-relaxed mb-6">
                    In this guide, we will walk you through setting up your AWS environment, configuring Terraform, and deploying essential AWS services like EC2 instances, S3 buckets, and Virtual Private Clouds (VPCs). Each section will include detailed explanations, Terraform code examples, and placeholders for screenshots to illustrate the process.
                </p>
                <h2 class="text-3xl mt-8 mb-4">Prerequisites</h2>
                <ul class="list-disc list-inside text-lg leading-relaxed mb-6">
                    <li>An AWS Account with administrative access.</li>
                    <li>AWS CLI installed and configured with your credentials.</li>
                    <li>Terraform installed on your local machine.</li>
                    <li>Basic understanding of AWS concepts.</li>
                </ul>
                <div class="screenshot-placeholder">
                    Screenshot: AWS Management Console Login / Terraform Installation Confirmation
                </div>
            </section>

            <!-- EC2 Section -->
            <section id="ec2" class="mb-12">
                <h2 class="text-3xl mb-6">1. Provisioning an EC2 Instance with Terraform</h2>
                <p class="text-lg leading-relaxed mb-4">
                    An Amazon EC2 (Elastic Compute Cloud) instance is a virtual server in the AWS cloud. With Terraform, you can define the instance type, AMI, security groups, and more, ensuring your compute resources are consistently deployed.
                </p>
                <h3 class="text-2xl mb-4">Step 1: Define Provider and Variables</h3>
                <p class="text-lg leading-relaxed mb-4">
                    First, you need to tell Terraform which cloud provider you're using (AWS) and define any variables like region or instance type.
                </p>
                <pre class="code-block"><code>
# main.tf
provider "aws" {
  region = var.aws_region # Using a variable for flexibility
}

variable "aws_region" {
  description = "AWS region"
  type        = string
  default     = "us-east-1" # Default region
}

variable "instance_type" {
  description = "EC2 instance type"
  type        = string
  default     = "t2.micro" # Default instance type (Free Tier eligible)
}

variable "ami_id" {
  description = "AMI ID for the EC2 instance (e.g., Amazon Linux 2 AMI)"
  type        = string
  default     = "ami-053b0d53c279acc90" # Example AMI ID for us-east-1 (Amazon Linux 2)
}
                </code></pre>
                <div class="screenshot-placeholder">
                    Screenshot: `main.tf` file structure / AWS CLI configured
                </div>

                <h3 class="text-2xl mt-8 mb-4">Step 2: Create a Security Group</h3>
                <p class="text-lg leading-relaxed mb-4">
                    A security group acts as a virtual firewall for your instance to control inbound and outbound traffic. Here, we'll allow SSH access.
                </p>
                <pre class="code-block"><code>
# security_group.tf
resource "aws_security_group" "web_sg" {
  name        = "web-traffic-sg"
  description = "Allow HTTP and SSH inbound traffic"
  vpc_id      = aws_vpc.main_vpc.id # Assuming VPC is created, or use default VPC

  ingress {
    description = "SSH from VPC"
    from_port   = 22
    to_port     = 22
    protocol    = "tcp"
    cidr_blocks = ["0.0.0.0/0"] # Be cautious with 0.0.0.0/0 in production
  }

  ingress {
    description = "HTTP from VPC"
    from_port   = 80
    to_port     = 80
    protocol    = "tcp"
    cidr_blocks = ["0.0.0.0/0"]
  }

  egress {
    from_port   = 0
    to_port     = 0
    protocol    = "-1"
    cidr_blocks = ["0.0.0.0/0"]
  }

  tags = {
    Name = "web-traffic-sg"
  }
}
                </code></pre>
                <div class="screenshot-placeholder">
                    Screenshot: AWS Security Group Console (after creation)
                </div>

                <h3 class="text-2xl mt-8 mb-4">Step 3: Define the EC2 Instance</h3>
                <p class="text-lg leading-relaxed mb-4">
                    Now, let's define the EC2 instance itself, referencing the AMI and security group.
                </p>
                <pre class="code-block"><code>
# ec2_instance.tf
resource "aws_instance" "web_server" {
  ami           = var.ami_id
  instance_type = var.instance_type
  key_name      = "your-key-pair-name" # Replace with your SSH key pair name
  vpc_security_group_ids = [aws_security_group.web_sg.id] # Attach the security group
  # subnet_id     = aws_subnet.public_subnet.id # If you have a custom VPC and subnet

  tags = {
    Name = "MyWebServer"
  }
}

output "public_ip" {
  description = "Public IP address of the EC2 instance"
  value       = aws_instance.web_server.public_ip
}
                </code></pre>
                <div class="screenshot-placeholder">
                    Screenshot: AWS EC2 Instances Console (running instance)
                </div>

                <h3 class="text-2xl mt-8 mb-4">Step 4: Deploy with Terraform</h3>
                <p class="text-lg leading-relaxed mb-4">
                    Navigate to your Terraform project directory in your terminal and run the following commands:
                </p>
                <pre class="code-block"><code>
terraform init      # Initializes the Terraform working directory
terraform plan      # Shows an execution plan of what Terraform will do
terraform apply     # Applies the changes to create the resources
                </code></pre>
                <div class="screenshot-placeholder">
                    Screenshot: Terminal output of `terraform apply` success
                </div>
            </section>

            <!-- S3 Section -->
            <section id="s3" class="mb-12">
                <h2 class="text-3xl mb-6">2. Creating an S3 Bucket with Terraform</h2>
                <p class="text-lg leading-relaxed mb-4">
                    Amazon S3 (Simple Storage Service) is an object storage service offering industry-leading scalability, data availability, security, and performance. You can use S3 to store and retrieve any amount of data at any time, from anywhere on the web.
                </p>
                <h3 class="text-2xl mb-4">Step 1: Define the S3 Bucket</h3>
                <p class="text-lg leading-relaxed mb-4">
                    Creating an S3 bucket is straightforward. You just need to specify a unique bucket name and desired region.
                </p>
                <pre class="code-block"><code>
# s3_bucket.tf
resource "aws_s3_bucket" "my_website_bucket" {
  bucket = "my-unique-static-website-bucket-2025" # Replace with a globally unique name
  acl    = "private" # Start with private, adjust as needed (e.g., public-read for static websites)

  tags = {
    Name        = "MyWebsiteBucket"
    Environment = "Development"
  }
}

# Optional: Enable static website hosting
resource "aws_s3_bucket_website_configuration" "website_config" {
  bucket = aws_s3_bucket.my_website_bucket.id

  index_document {
    suffix = "index.html"
  }

  error_document {
    key = "error.html"
  }
}

# Optional: Block public access (highly recommended for most buckets)
resource "aws_s3_bucket_public_access_block" "block_public_access" {
  bucket = aws_s3_bucket.my_website_bucket.id

  block_public_acls       = true
  block_public_policy     = true
  ignore_public_acls      = true
  restrict_public_buckets = true
}

output "s3_bucket_id" {
  description = "ID of the S3 bucket"
  value       = aws_s3_bucket.my_website_bucket.id
}

output "s3_bucket_arn" {
  description = "ARN of the S3 bucket"
  value       = aws_s3_bucket.my_website_bucket.arn
}
                </code></pre>
                <div class="screenshot-placeholder">
                    Screenshot: AWS S3 Console (empty bucket)
                </div>

                <h3 class="text-2xl mt-8 mb-4">Step 2: Deploy with Terraform</h3>
                <p class="text-lg leading-relaxed mb-4">
                    Run the familiar Terraform commands to create your S3 bucket:
                </p>
                <pre class="code-block"><code>
terraform init
terraform plan
terraform apply
                </code></pre>
                <div class="screenshot-placeholder">
                    Screenshot: Terminal output of `terraform apply` for S3 bucket
                </div>
            </section>

            <!-- VPC Section -->
            <section id="vpc" class="mb-12">
                <h2 class="text-3xl mb-6">3. Building a Custom VPC with Terraform</h2>
                <p class="text-lg leading-relaxed mb-4">
                    A Virtual Private Cloud (VPC) is a logically isolated section of the AWS Cloud where you can launch AWS resources in a virtual network that you define. Creating a custom VPC gives you complete control over your network environment, including IP address ranges, subnets, route tables, and network gateways.
                </p>
                <h3 class="text-2xl mb-4">Step 1: Define the VPC</h3>
                <p class="text-lg leading-relaxed mb-4">
                    Start by defining the VPC with its CIDR block.
                </p>
                <pre class="code-block"><code>
# vpc.tf
resource "aws_vpc" "main_vpc" {
  cidr_block = "10.0.0.0/16"
  enable_dns_support   = true
  enable_dns_hostnames = true

  tags = {
    Name = "MyCustomVPC"
  }
}

output "vpc_id" {
  description = "ID of the created VPC"
  value       = aws_vpc.main_vpc.id
}
                </code></pre>
                <div class="screenshot-placeholder">
                    Screenshot: AWS VPC Console (VPC details)
                </div>

                <h3 class="text-2xl mt-8 mb-4">Step 2: Create Subnets (Public and Private)</h3>
                <p class="text-lg leading-relaxed mb-4">
                    Subnets are ranges of IP addresses in your VPC. We'll create a public subnet (for internet-facing resources) and a private subnet (for internal resources).
                </p>
                <pre class="code-block"><code>
# subnets.tf
resource "aws_subnet" "public_subnet" {
  vpc_id            = aws_vpc.main_vpc.id
  cidr_block        = "10.0.1.0/24"
  availability_zone = "${var.aws_region}a" # Example AZ
  map_public_ip_on_launch = true # Instances in this subnet get a public IP

  tags = {
    Name = "PublicSubnet"
  }
}

resource "aws_subnet" "private_subnet" {
  vpc_id            = aws_vpc.main_vpc.id
  cidr_block        = "10.0.2.0/24"
  availability_zone = "${var.aws_region}b" # Example AZ

  tags = {
    Name = "PrivateSubnet"
  }
}

output "public_subnet_id" {
  description = "ID of the public subnet"
  value       = aws_subnet.public_subnet.id
}

output "private_subnet_id" {
  description = "ID of the private subnet"
  value       = aws_subnet.private_subnet.id
}
                </code></pre>
                <div class="screenshot-placeholder">
                    Screenshot: AWS Subnets Console
                </div>

                <h3 class="text-2xl mt-8 mb-4">Step 3: Create an Internet Gateway</h3>
                <p class="text-lg leading-relaxed mb-4">
                    An Internet Gateway allows communication between your VPC and the internet.
                </p>
                <pre class="code-block"><code>
# internet_gateway.tf
resource "aws_internet_gateway" "gw" {
  vpc_id = aws_vpc.main_vpc.id

  tags = {
    Name = "MyVPCGateway"
  }
}

output "internet_gateway_id" {
  description = "ID of the Internet Gateway"
  value       = aws_internet_gateway.gw.id
}
                </code></pre>
                <div class="screenshot-placeholder">
                    Screenshot: AWS Internet Gateways Console
                </div>

                <h3 class="text-2xl mt-8 mb-4">Step 4: Create Route Tables and Associations</h3>
                <p class="text-lg leading-relaxed mb-4">
                    Route tables control where network traffic from your subnets is directed. We'll create one for public access and one for private.
                </p>
                <pre class="code-block"><code>
# route_tables.tf
resource "aws_route_table" "public_rt" {
  vpc_id = aws_vpc.main_vpc.id

  route {
    cidr_block = "0.0.0.0/0"
    gateway_id = aws_internet_gateway.gw.id
  }

  tags = {
    Name = "PublicRouteTable"
  }
}

resource "aws_route_table_association" "public_rt_association" {
  subnet_id      = aws_subnet.public_subnet.id
  route_table_id = aws_route_table.public_rt.id
}

resource "aws_route_table" "private_rt" {
  vpc_id = aws_vpc.main_vpc.id

  tags = {
    Name = "PrivateRouteTable"
  }
  # No internet route here for private subnet, unless NAT Gateway is configured
}

resource "aws_route_table_association" "private_rt_association" {
  subnet_id      = aws_subnet.private_subnet.id
  route_table_id = aws_route_table.private_rt.id
}

output "public_route_table_id" {
  description = "ID of the public route table"
  value       = aws_route_table.public_rt.id
}
                </code></pre>
                <div class="screenshot-placeholder">
                    Screenshot: AWS Route Tables Console
                </div>

                <h3 class="text-2xl mt-8 mb-4">Step 5: Deploy with Terraform</h3>
                <p class="text-lg leading-relaxed mb-4">
                    Run Terraform to provision your custom VPC and its components:
                </p>
                <pre class="code-block"><code>
terraform init
terraform plan
terraform apply
                </code></pre>
                <div class="screenshot-placeholder">
                    Screenshot: Terminal output of `terraform apply` for VPC
                </div>
            </section>

            <!-- Conclusion -->
            <section id="conclusion" class="mt-12 text-center">
                <h2 class="text-3xl mb-4">Conclusion</h2>
                <p class="text-lg leading-relaxed">
                    You've now learned how to provision fundamental AWS services (EC2, S3, VPC) using Terraform. This Infrastructure as Code approach empowers you to manage your cloud resources efficiently, repeatably, and with version control. Remember to always run `terraform destroy` when you no longer need the resources to avoid incurring unnecessary costs.
                </p>
                <p class="text-lg leading-relaxed mt-4">
                    Explore more Terraform resources and AWS services to further enhance your cloud infrastructure automation skills!
                </p>
            </section>

        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-6 mt-8">
        <div class="container text-center">
            <p>&copy; 2025 AWS Terraform Guide. All rights reserved. Created by Harsh Juneja.</p>
        </div>
    </footer>

</body>
</html>
